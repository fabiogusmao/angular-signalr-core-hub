!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.signalR=t():e.signalR=t()}(window,function(){return e={},f.m=d=[function(e,t,n){"use strict";n.r(t);n(1);var r=n(3);n.d(t,"VERSION",function(){return r.VERSION}),n.d(t,"AbortError",function(){return r.AbortError}),n.d(t,"HttpError",function(){return r.HttpError}),n.d(t,"TimeoutError",function(){return r.TimeoutError}),n.d(t,"HttpClient",function(){return r.HttpClient}),n.d(t,"HttpResponse",function(){return r.HttpResponse}),n.d(t,"DefaultHttpClient",function(){return r.DefaultHttpClient}),n.d(t,"HubConnection",function(){return r.HubConnection}),n.d(t,"HubConnectionState",function(){return r.HubConnectionState}),n.d(t,"HubConnectionBuilder",function(){return r.HubConnectionBuilder}),n.d(t,"MessageType",function(){return r.MessageType}),n.d(t,"LogLevel",function(){return r.LogLevel}),n.d(t,"HttpTransportType",function(){return r.HttpTransportType}),n.d(t,"TransferFormat",function(){return r.TransferFormat}),n.d(t,"NullLogger",function(){return r.NullLogger}),n.d(t,"JsonHubProtocol",function(){return r.JsonHubProtocol}),Uint8Array.prototype.indexOf||Object.defineProperty(Uint8Array.prototype,"indexOf",{value:Array.prototype.indexOf,writable:!0}),Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice,writable:!0}),Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach,writable:!0})},function(e,t,le){(function(ce){var ue;e.exports=function(){"use strict";function n(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}function u(e){return typeof e==="function"}var e=void 0;if(Array.isArray){e=Array.isArray}else{e=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}var r=e,o=0,i=void 0,s=void 0,a=function e(t,n){w[o]=t;w[o+1]=n;o+=2;if(o===2){if(s){s(S)}else{C()}}};function t(e){s=e}function c(e){a=e}var l=typeof window!=="undefined"?window:undefined,f=l||{},p=f.MutationObserver||f.WebKitMutationObserver,h=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]",g=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function d(){return function(){return process.nextTick(S)}}function v(){if(typeof i!=="undefined"){return function(){i(S)}}return m()}function y(){var e=0;var t=new p(S);var n=document.createTextNode("");t.observe(n,{characterData:true});return function(){n.data=e=++e%2}}function b(){var e=new MessageChannel;e.port1.onmessage=S;return function(){return e.port2.postMessage(0)}}function m(){var e=setTimeout;return function(){return e(S,1)}}var w=new Array(1e3);function S(){for(var e=0;e<o;e+=2){var t=w[e];var n=w[e+1];t(n);w[e]=undefined;w[e+1]=undefined}o=0}function T(){try{var e=ue;var t=le(!function e(){var t=new Error("Cannot find module 'vertx'");t.code="MODULE_NOT_FOUND";throw t}());i=t.runOnLoop||t.runOnContext;return v()}catch(e){return m()}}var C=void 0;if(h){C=d()}else if(p){C=y()}else if(g){C=b()}else if(l===undefined&&"function"==="function"){C=T()}else{C=m()}function L(e,t){var n=this;var r=new this.constructor(P);if(r[E]===undefined){Q(r)}var o=n._state;if(o){var i=arguments[o-1];a(function(){return K(o,r,i,n._result)})}else{B(n,r,e,t)}return r}function k(e){var t=this;if(e&&typeof e==="object"&&e.constructor===t){return e}var n=new t(P);N(n,e);return n}var E=Math.random().toString(36).substring(16);function P(){}var _=void 0,H=1,I=2,A=new X;function M(){return new TypeError("You cannot resolve a promise with itself")}function x(){return new TypeError("A promises callback cannot return that same promise.")}function O(e){try{return e.then}catch(e){A.error=e;return A}}function j(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function R(e,r,o){a(function(t){var n=false;var e=j(o,r,function(e){if(n){return}n=true;if(r!==e){N(t,e)}else{W(t,e)}},function(e){if(n){return}n=true;U(t,e)},"Settle: "+(t._label||" unknown promise"));if(!n&&e){n=true;U(t,e)}},e)}function F(t,e){if(e._state===H){W(t,e._result)}else if(e._state===I){U(t,e._result)}else{B(e,undefined,function(e){return N(t,e)},function(e){return U(t,e)})}}function D(e,t,n){if(t.constructor===e.constructor&&n===L&&t.constructor.resolve===k){F(e,t)}else{if(n===A){U(e,A.error);A.error=null}else if(n===undefined){W(e,t)}else if(u(n)){R(e,t,n)}else{W(e,t)}}}function N(e,t){if(e===t){U(e,M())}else if(n(t)){D(e,t,O(t))}else{W(e,t)}}function q(e){if(e._onerror){e._onerror(e._result)}J(e)}function W(e,t){if(e._state!==_){return}e._result=t;e._state=H;if(e._subscribers.length!==0){a(J,e)}}function U(e,t){if(e._state!==_){return}e._state=I;e._result=t;a(q,e)}function B(e,t,n,r){var o=e._subscribers;var i=o.length;e._onerror=null;o[i]=t;o[i+H]=n;o[i+I]=r;if(i===0&&e._state){a(J,e)}}function J(e){var t=e._subscribers;var n=e._state;if(t.length===0){return}var r=void 0,o=void 0,i=e._result;for(var s=0;s<t.length;s+=3){r=t[s];o=t[s+n];if(r){K(n,r,o,i)}else{o(i)}}e._subscribers.length=0}function X(){this.error=null}var z=new X;function G(e,t){try{return e(t)}catch(e){z.error=e;return z}}function K(e,t,n,r){var o=u(n),i=void 0,s=void 0,a=void 0,c=void 0;if(o){i=G(n,r);if(i===z){c=true;s=i.error;i.error=null}else{a=true}if(t===i){U(t,x());return}}else{i=r;a=true}if(t._state!==_){}else if(o&&a){N(t,i)}else if(c){U(t,s)}else if(e===H){W(t,i)}else if(e===I){U(t,i)}}function V(n,e){try{e(function e(t){N(n,t)},function e(t){U(n,t)})}catch(e){U(n,e)}}var Y=0;function $(){return Y++}function Q(e){e[E]=Y++;e._state=undefined;e._result=undefined;e._subscribers=[]}function Z(){return new Error("Array Methods must be provided an Array")}function Z(){return new Error("Array Methods must be provided an Array")}var ee=function(){function e(e,t){this._instanceConstructor=e;this.promise=new e(P);if(!this.promise[E]){Q(this.promise)}if(r(t)){this.length=t.length;this._remaining=t.length;this._result=new Array(this.length);if(this.length===0){W(this.promise,this._result)}else{this.length=this.length||0;this._enumerate(t);if(this._remaining===0){W(this.promise,this._result)}}}else{U(this.promise,Z())}}e.prototype._enumerate=function e(t){for(var n=0;this._state===_&&n<t.length;n++){this._eachEntry(t[n],n)}};e.prototype._eachEntry=function e(t,n){var r=this._instanceConstructor;var o=r.resolve;if(o===k){var i=O(t);if(i===L&&t._state!==_){this._settledAt(t._state,n,t._result)}else if(typeof i!=="function"){this._remaining--;this._result[n]=t}else if(r===se){var s=new r(P);D(s,t,i);this._willSettleAt(s,n)}else{this._willSettleAt(new r(function(e){return e(t)}),n)}}else{this._willSettleAt(o(t),n)}};e.prototype._settledAt=function e(t,n,r){var o=this.promise;if(o._state===_){this._remaining--;if(t===I){U(o,r)}else{this._result[n]=r}}if(this._remaining===0){W(o,this._result)}};e.prototype._willSettleAt=function e(t,n){var r=this;B(t,undefined,function(e){return r._settledAt(H,n,e)},function(e){return r._settledAt(I,n,e)})};return e}();function te(e){return new ee(this,e).promise}function ne(o){var i=this;if(r(o))return new i(function(e,t){for(var n=o.length,r=0;r<n;r++)i.resolve(o[r]).then(e,t)});else return new i(function(e,t){return t(new TypeError("You must pass an array to race."))})}function re(e){var t=new this(P);return U(t,e),t}function oe(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ie(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var se=function(){function t(e){this[E]=$();this._result=this._state=undefined;this._subscribers=[];if(P!==e){typeof e!=="function"&&oe();this instanceof t?V(this,e):ie()}}t.prototype.catch=function e(t){return this.then(null,t)};t.prototype.finally=function e(t){var n=this;var r=n.constructor;return n.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})})};return t}();function ae(){var e=void 0;if(void 0!==ce)e=ce;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=se}return se.prototype.then=L,se.all=function(e){return new ee(this,e).promise},se.race=function(o){var i=this;return r(o)?new i(function(e,t){for(var n=o.length,r=0;r<n;r++)i.resolve(o[r]).then(e,t)}):new i(function(e,t){return t(new TypeError("You must pass an array to race."))})},se.resolve=k,se.reject=function(e){var t=new this(P);return U(t,e),t},se._setScheduler=function(e){s=e},se._setAsap=function(e){a=e},se._asap=a,se.polyfill=function(){var e=void 0;if(void 0!==ce)e=ce;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=se},(se.Promise=se).polyfill(),se}()}).call(this,le(2))},function(Bd,Cd){var Dd;Dd=function(){return this}();try{Dd=Dd||Function("return this")()||eval("this")}catch(e){"object"==typeof window&&(Dd=window)}Bd.exports=Dd},function(e,t,n){"use strict";n.r(t),n.d(t,"VERSION",function(){return h});var r=n(4);n.d(t,"AbortError",function(){return r.AbortError}),n.d(t,"HttpError",function(){return r.HttpError}),n.d(t,"TimeoutError",function(){return r.TimeoutError});var o=n(5);n.d(t,"HttpClient",function(){return o.HttpClient}),n.d(t,"HttpResponse",function(){return o.HttpResponse});var i=n(6);n.d(t,"DefaultHttpClient",function(){return i.DefaultHttpClient});var s=n(10);n.d(t,"HubConnection",function(){return s.HubConnection}),n.d(t,"HubConnectionState",function(){return s.HubConnectionState});var a=n(16);n.d(t,"HubConnectionBuilder",function(){return a.HubConnectionBuilder});var c=n(15);n.d(t,"MessageType",function(){return c.MessageType});var u=n(9);n.d(t,"LogLevel",function(){return u.LogLevel});var l=n(18);n.d(t,"HttpTransportType",function(){return l.HttpTransportType}),n.d(t,"TransferFormat",function(){return l.TransferFormat});var f=n(14);n.d(t,"NullLogger",function(){return f.NullLogger});var p=n(23);n.d(t,"JsonHubProtocol",function(){return p.JsonHubProtocol});var h="1.1.4"},function(e,t,n){"use strict";n.r(t),n.d(t,"HttpError",function(){return s}),n.d(t,"TimeoutError",function(){return u}),n.d(t,"AbortError",function(){return p});var r,o,i=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(o=Error,i(a,o),a);function a(e,t){var n=this,r=this.constructor.prototype;return(n=o.call(this,e)||this).statusCode=t,n.__proto__=r,n}var c,u=(c=Error,i(l,c),l);function l(e){void 0===e&&(e="A timeout occurred.");var t=this,n=this.constructor.prototype;return(t=c.call(this,e)||this).__proto__=n,t}var f,p=(f=Error,i(h,f),h);function h(e){void 0===e&&(e="An abort occurred.");var t=this,n=this.constructor.prototype;return(t=f.call(this,e)||this).__proto__=n,t}},function(e,t,n){"use strict";n.r(t),n.d(t,"HttpResponse",function(){return o}),n.d(t,"HttpClient",function(){return i});var r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=function(e,t,n){this.statusCode=e,this.statusText=t,this.content=n},i=(s.prototype.get=function(e,t){return this.send(r({},t,{method:"GET",url:e}))},s.prototype.post=function(e,t){return this.send(r({},t,{method:"POST",url:e}))},s.prototype.delete=function(e,t){return this.send(r({},t,{method:"DELETE",url:e}))},s.prototype.getCookieString=function(e){return""},s);function s(){}},function(e,t,n){"use strict";n.r(t),n.d(t,"DefaultHttpClient",function(){return l});var r,o,i=n(4),s=n(5),a=n(7),c=n(8),u=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=(o=s.HttpClient,u(f,o),f.prototype.send=function(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new i.AbortError):e.method?e.url?this.httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},f.prototype.getCookieString=function(e){return this.httpClient.getCookieString(e)},f);function f(e){var t=o.call(this)||this;return"undefined"!=typeof XMLHttpRequest?t.httpClient=new c.XhrHttpClient(e):t.httpClient=new a.NodeHttpClient(e),t}},function(e,t,n){"use strict";n.r(t),n.d(t,"NodeHttpClient",function(){return a});var r,o,i=n(5),s=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(o=i.HttpClient,s(c,o),c.prototype.send=function(){return Promise.reject(new Error("If using Node either provide an XmlHttpRequest polyfill or consume the cjs or esm script instead of the browser/signalr.js one."))},c);function c(e){return o.call(this)||this}},function(e,t,n){"use strict";n.r(t),n.d(t,"XhrHttpClient",function(){return u});var r,o,s=n(4),a=n(5),c=n(9),i=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=(o=a.HttpClient,i(l,o),l.prototype.send=function(o){var i=this;return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new s.AbortError):o.method?o.url?new Promise(function(e,t){var n=new XMLHttpRequest;n.open(o.method,o.url,!0),n.withCredentials=!0,n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-Type","text/plain;charset=UTF-8");var r=o.headers;r&&Object.keys(r).forEach(function(e){n.setRequestHeader(e,r[e])}),o.responseType&&(n.responseType=o.responseType),o.abortSignal&&(o.abortSignal.onabort=function(){n.abort(),t(new s.AbortError)}),o.timeout&&(n.timeout=o.timeout),n.onload=function(){o.abortSignal&&(o.abortSignal.onabort=null),200<=n.status&&n.status<300?e(new a.HttpResponse(n.status,n.statusText,n.response||n.responseText)):t(new s.HttpError(n.statusText,n.status))},n.onerror=function(){i.logger.log(c.LogLevel.Warning,"Error from HTTP request. "+n.status+": "+n.statusText+"."),t(new s.HttpError(n.statusText,n.status))},n.ontimeout=function(){i.logger.log(c.LogLevel.Warning,"Timeout from HTTP request."),t(new s.TimeoutError)},n.send(o.content||"")}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},l);function l(e){var t=o.call(this)||this;return t.logger=e,t}},function(e,t,n){"use strict";var r,o;n.r(t),n.d(t,"LogLevel",function(){return r}),(o=r=r||{})[o.Trace=0]="Trace",o[o.Debug=1]="Debug",o[o.Information=2]="Information",o[o.Warning=3]="Warning",o[o.Error=4]="Error",o[o.Critical=5]="Critical",o[o.None=6]="None"},function(e,t,n){"use strict";n.r(t),n.d(t,"HubConnectionState",function(){return o}),n.d(t,"HubConnection",function(){return f});var o,r,i=n(11),c=n(15),s=n(9),u=n(13),a=function(i,s,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}o((c=c.apply(i,s||[])).next())})},l=function(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};(r=o=o||{})[r.Disconnected=0]="Disconnected",r[r.Connected=1]="Connected";var f=(p.create=function(e,t,n){return new p(e,t,n)},Object.defineProperty(p.prototype,"state",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),p.prototype.start=function(){return a(this,void 0,void 0,function(){var t,n,r=this;return l(this,function(e){switch(e.label){case 0:return t={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(s.LogLevel.Debug,"Starting HubConnection."),this.receivedHandshakeResponse=!1,n=new Promise(function(e,t){r.handshakeResolver=e,r.handshakeRejecter=t}),[4,this.connection.start(this.protocol.transferFormat)];case 1:return e.sent(),this.logger.log(s.LogLevel.Debug,"Sending handshake request."),[4,this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(t))];case 2:return e.sent(),this.logger.log(s.LogLevel.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.resetTimeoutPeriod(),this.resetKeepAliveInterval(),[4,n];case 3:return e.sent(),this.connectionState=o.Connected,[2]}})})},p.prototype.stop=function(){return this.logger.log(s.LogLevel.Debug,"Stopping HubConnection."),this.cleanupTimeout(),this.cleanupPingTimer(),this.connection.stop()},p.prototype.stream=function(e){for(var n=this,t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o,i=this.createStreamInvocation(e,t),s=new u.Subject;s.cancelCallback=function(){var e=n.createCancelInvocation(i.invocationId),t=n.protocol.writeMessage(e);return delete n.callbacks[i.invocationId],o.then(function(){return n.sendMessage(t)})},this.callbacks[i.invocationId]=function(e,t){t?s.error(t):e&&(e.type===c.MessageType.Completion?e.error?s.error(new Error(e.error)):s.complete():s.next(e.item))};var a=this.protocol.writeMessage(i);return o=this.sendMessage(a).catch(function(e){s.error(e),delete n.callbacks[i.invocationId]}),s},p.prototype.sendMessage=function(e){return this.resetKeepAliveInterval(),this.connection.send(e)},p.prototype.send=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.createInvocation(e,t,!0),o=this.protocol.writeMessage(r);return this.sendMessage(o)},p.prototype.invoke=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.createInvocation(e,n,!1);return new Promise(function(n,r){t.callbacks[o.invocationId]=function(e,t){t?r(t):e&&(e.type===c.MessageType.Completion?e.error?r(new Error(e.error)):n(e.result):r(new Error("Unexpected message type: "+e.type)))};var e=t.protocol.writeMessage(o);t.sendMessage(e).catch(function(e){r(e),delete t.callbacks[o.invocationId]})})},p.prototype.on=function(e,t){e&&t&&(e=e.toLowerCase(),this.methods[e]||(this.methods[e]=[]),-1===this.methods[e].indexOf(t)&&this.methods[e].push(t))},p.prototype.off=function(e,t){if(e){e=e.toLowerCase();var n=this.methods[e];if(n)if(t){var r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this.methods[e])}else delete this.methods[e]}},p.prototype.onclose=function(e){e&&this.closedCallbacks.push(e)},p.prototype.processIncomingData=function(e){if(this.cleanupTimeout(),this.receivedHandshakeResponse||(e=this.processHandshakeResponse(e),this.receivedHandshakeResponse=!0),e)for(var t=0,n=this.protocol.parseMessages(e,this.logger);t<n.length;t++){var r=n[t];switch(r.type){case c.MessageType.Invocation:this.invokeClientMethod(r);break;case c.MessageType.StreamItem:case c.MessageType.Completion:var o=this.callbacks[r.invocationId];null!=o&&(r.type===c.MessageType.Completion&&delete this.callbacks[r.invocationId],o(r));break;case c.MessageType.Ping:break;case c.MessageType.Close:this.logger.log(s.LogLevel.Information,"Close message received from server."),this.connection.stop(r.error?new Error("Server returned an error on close: "+r.error):void 0);break;default:this.logger.log(s.LogLevel.Warning,"Invalid message type: "+r.type+".")}}this.resetTimeoutPeriod()},p.prototype.processHandshakeResponse=function(e){var t,n,r;try{r=(t=this.handshakeProtocol.parseHandshakeResponse(e))[0],n=t[1]}catch(e){var o="Error parsing handshake response: "+e;this.logger.log(s.LogLevel.Error,o);var i=new Error(o);throw this.connection.stop(i),this.handshakeRejecter(i),i}if(n.error)throw o="Server returned handshake error: "+n.error,this.logger.log(s.LogLevel.Error,o),this.handshakeRejecter(o),this.connection.stop(new Error(o)),new Error(o);return this.logger.log(s.LogLevel.Debug,"Server handshake complete."),this.handshakeResolver(),r},p.prototype.resetKeepAliveInterval=function(){var e=this;this.cleanupPingTimer(),this.pingServerHandle=setTimeout(function(){return a(e,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:if(this.connectionState!==o.Connected)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.sendMessage(this.cachedPingMessage)];case 2:return e.sent(),[3,4];case 3:return e.sent(),this.cleanupPingTimer(),[3,4];case 4:return[2]}})})},this.keepAliveIntervalInMilliseconds)},p.prototype.resetTimeoutPeriod=function(){var e=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout(function(){return e.serverTimeout()},this.serverTimeoutInMilliseconds))},p.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},p.prototype.invokeClientMethod=function(t){var n=this,e=this.methods[t.target.toLowerCase()];if(e){if(e.forEach(function(e){return e.apply(n,t.arguments)}),t.invocationId){var r="Server requested a response, which is not supported in this version of the client.";this.logger.log(s.LogLevel.Error,r),this.connection.stop(new Error(r))}}else this.logger.log(s.LogLevel.Warning,"No client method with the name '"+t.target+"' found.")},p.prototype.connectionClosed=function(t){var n=this,r=this.callbacks;this.callbacks={},this.connectionState=o.Disconnected,this.handshakeRejecter&&this.handshakeRejecter(t),Object.keys(r).forEach(function(e){(0,r[e])(null,t||new Error("Invocation canceled due to connection being closed."))}),this.cleanupTimeout(),this.cleanupPingTimer(),this.closedCallbacks.forEach(function(e){return e.apply(n,[t])})},p.prototype.cleanupPingTimer=function(){this.pingServerHandle&&clearTimeout(this.pingServerHandle)},p.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},p.prototype.createInvocation=function(e,t,n){if(n)return{arguments:t,target:e,type:c.MessageType.Invocation};var r=this.id;return this.id++,{arguments:t,invocationId:r.toString(),target:e,type:c.MessageType.Invocation}},p.prototype.createStreamInvocation=function(e,t){var n=this.id;return this.id++,{arguments:t,invocationId:n.toString(),target:e,type:c.MessageType.StreamInvocation}},p.prototype.createCancelInvocation=function(e){return{invocationId:e,type:c.MessageType.CancelInvocation}},p);function p(e,t,n){var r=this;u.Arg.isRequired(e,"connection"),u.Arg.isRequired(t,"logger"),u.Arg.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this.logger=t,this.protocol=n,this.connection=e,this.handshakeProtocol=new i.HandshakeProtocol,this.connection.onreceive=function(e){return r.processIncomingData(e)},this.connection.onclose=function(e){return r.connectionClosed(e)},this.callbacks={},this.methods={},this.closedCallbacks=[],this.id=0,this.receivedHandshakeResponse=!1,this.connectionState=o.Disconnected,this.cachedPingMessage=this.protocol.writeMessage({type:c.MessageType.Ping})}},function(e,t,n){"use strict";n.r(t),n.d(t,"HandshakeProtocol",function(){return r});var u=n(12),l=n(13),r=(o.prototype.writeHandshakeRequest=function(e){return u.TextMessageFormat.write(JSON.stringify(e))},o.prototype.parseHandshakeResponse=function(e){var t,n;if(Object(l.isArrayBuffer)(e)||"undefined"!=typeof Buffer&&e instanceof Buffer){var r=new Uint8Array(e);if(-1===(i=r.indexOf(u.TextMessageFormat.RecordSeparatorCode)))throw new Error("Message is incomplete.");var o=i+1;t=String.fromCharCode.apply(null,r.slice(0,o)),n=r.byteLength>o?r.slice(o).buffer:null}else{var i,s=e;if(-1===(i=s.indexOf(u.TextMessageFormat.RecordSeparator)))throw new Error("Message is incomplete.");o=i+1,t=s.substring(0,o),n=s.length>o?s.substring(o):null}var a=u.TextMessageFormat.parse(t),c=JSON.parse(a[0]);if(c.type)throw new Error("Expected a handshake response from the server.");return[n,c]},o);function o(){}},function(e,t,n){"use strict";n.r(t),n.d(t,"TextMessageFormat",function(){return r});var r=(o.write=function(e){return""+e+o.RecordSeparator},o.parse=function(e){if(e[e.length-1]!==o.RecordSeparator)throw new Error("Message is incomplete.");var t=e.split(o.RecordSeparator);return t.pop(),t},o.RecordSeparatorCode=30,o.RecordSeparator=String.fromCharCode(o.RecordSeparatorCode),o);function o(){}},function(e,t,n){"use strict";n.r(t),n.d(t,"Arg",function(){return i}),n.d(t,"getDataDetail",function(){return d}),n.d(t,"formatArrayBuffer",function(){return a}),n.d(t,"isArrayBuffer",function(){return v}),n.d(t,"sendMessage",function(){return c}),n.d(t,"createLogger",function(){return u}),n.d(t,"Subject",function(){return l}),n.d(t,"SubjectSubscription",function(){return p}),n.d(t,"ConsoleLogger",function(){return b});var h=n(9),r=n(14),o=function(i,s,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}o((c=c.apply(i,s||[])).next())})},g=function(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},i=(s.isRequired=function(e,t){if(null==e)throw new Error("The '"+t+"' argument is required.")},s.isIn=function(e,t,n){if(!(e in t))throw new Error("Unknown "+n+" value: "+e+".")},s);function s(){}function d(e,t){var n="";return v(e)?(n="Binary data of length "+e.byteLength,t&&(n+=". Content: '"+a(e)+"'")):"string"==typeof e&&(n="String data of length "+e.length,t&&(n+=". Content: '"+e+"'")),n}function a(e){var t=new Uint8Array(e),n="";return t.forEach(function(e){n+="0x"+(e<16?"0":"")+e.toString(16)+" "}),n.substr(0,n.length-1)}function v(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function c(s,a,c,u,l,f,p){return o(this,void 0,void 0,function(){var t,n,r,o,i;return g(this,function(e){switch(e.label){case 0:return l?[4,l()]:[3,2];case 1:(r=e.sent())&&((t={}).Authorization="Bearer "+r,n=t),e.label=2;case 2:return s.log(h.LogLevel.Trace,"("+a+" transport) sending data. "+d(f,p)+"."),o=v(f)?"arraybuffer":"text",[4,c.post(u,{content:f,headers:n,responseType:o})];case 3:return i=e.sent(),s.log(h.LogLevel.Trace,"("+a+" transport) request complete. Response status: "+i.statusCode+"."),[2]}})})}function u(e){return void 0===e?new b(h.LogLevel.Information):null===e?r.NullLogger.instance:e.log?e:new b(e)}var l=(f.prototype.next=function(e){for(var t=0,n=this.observers;t<n.length;t++)n[t].next(e)},f.prototype.error=function(e){for(var t=0,n=this.observers;t<n.length;t++){var r=n[t];r.error&&r.error(e)}},f.prototype.complete=function(){for(var e=0,t=this.observers;e<t.length;e++){var n=t[e];n.complete&&n.complete()}},f.prototype.subscribe=function(e){return this.observers.push(e),new p(this,e)},f);function f(){this.observers=[]}var p=(y.prototype.dispose=function(){var e=this.subject.observers.indexOf(this.observer);-1<e&&this.subject.observers.splice(e,1),0===this.subject.observers.length&&this.subject.cancelCallback&&this.subject.cancelCallback().catch(function(e){})},y);function y(e,t){this.subject=e,this.observer=t}var b=(m.prototype.log=function(e,t){if(e>=this.minimumLogLevel)switch(e){case h.LogLevel.Critical:case h.LogLevel.Error:console.error("["+(new Date).toISOString()+"] "+h.LogLevel[e]+": "+t);break;case h.LogLevel.Warning:console.warn("["+(new Date).toISOString()+"] "+h.LogLevel[e]+": "+t);break;case h.LogLevel.Information:console.info("["+(new Date).toISOString()+"] "+h.LogLevel[e]+": "+t);break;default:console.log("["+(new Date).toISOString()+"] "+h.LogLevel[e]+": "+t)}},m);function m(e){this.minimumLogLevel=e}},function(e,t,n){"use strict";n.r(t),n.d(t,"NullLogger",function(){return r});var r=(o.prototype.log=function(e,t){},o.instance=new o,o);function o(){}},function(e,t,n){"use strict";var r,o;n.r(t),n.d(t,"MessageType",function(){return r}),(o=r=r||{})[o.Invocation=1]="Invocation",o[o.StreamItem=2]="StreamItem",o[o.Completion=3]="Completion",o[o.StreamInvocation=4]="StreamInvocation",o[o.CancelInvocation=5]="CancelInvocation",o[o.Ping=6]="Ping",o[o.Close=7]="Close"},function(e,t,n){"use strict";n.r(t),n.d(t,"HubConnectionBuilder",function(){return c});var r=n(17),o=n(10),i=n(23),s=n(14),a=n(13),c=(u.prototype.configureLogging=function(e){return a.Arg.isRequired(e,"logging"),void 0!==e.log?this.logger=e:this.logger=new a.ConsoleLogger(e),this},u.prototype.withUrl=function(e,t){return a.Arg.isRequired(e,"url"),this.url=e,this.httpConnectionOptions="object"==typeof t?t:{transport:t},this},u.prototype.withHubProtocol=function(e){return a.Arg.isRequired(e,"protocol"),this.protocol=e,this},u.prototype.build=function(){var e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var t=new r.HttpConnection(this.url,e);return o.HubConnection.create(t,this.logger||s.NullLogger.instance,this.protocol||new i.JsonHubProtocol)},u);function u(){}},function(e,t,n){"use strict";n.r(t),n.d(t,"HttpConnection",function(){return f});var r=n(6),p=n(9),h=n(18),l=n(19),o=n(21),i=n(13),s=n(22),g=function(i,s,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}o((c=c.apply(i,s||[])).next())})},d=function(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},a=null,c=null;if("undefined"==typeof window){var u=require;a=u("ws"),c=u("eventsource")}var f=(v.prototype.start=function(e){return e=e||h.TransferFormat.Binary,i.Arg.isIn(e,h.TransferFormat,"transferFormat"),this.logger.log(p.LogLevel.Debug,"Starting connection with transfer format '"+h.TransferFormat[e]+"'."),2!==this.connectionState?Promise.reject(new Error("Cannot start a connection that is not in the 'Disconnected' state.")):(this.connectionState=0,this.startPromise=this.startInternal(e),this.startPromise)},v.prototype.send=function(e){if(1!==this.connectionState)throw new Error("Cannot send data if the connection is not in the 'Connected' State.");return this.transport.send(e)},v.prototype.stop=function(t){return g(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:this.connectionState=2,this.stopError=t,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.startPromise];case 2:case 3:return e.sent(),[3,4];case 4:return this.transport?[4,this.transport.stop()]:[3,6];case 5:e.sent(),this.transport=void 0,e.label=6;case 6:return[2]}})})},v.prototype.startInternal=function(u){return g(this,void 0,void 0,function(){var n,r,o,t,i,s,a,c=this;return d(this,function(e){switch(e.label){case 0:n=this.baseUrl,this.accessTokenFactory=this.options.accessTokenFactory,e.label=1;case 1:return e.trys.push([1,12,,13]),this.options.skipNegotiation?this.options.transport!==h.HttpTransportType.WebSockets?[3,3]:(this.transport=this.constructTransport(h.HttpTransportType.WebSockets),[4,this.transport.connect(n,u)]):[3,5];case 2:return e.sent(),[3,4];case 3:throw Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:r=null,o=0,t=function(){var t;return d(this,function(e){switch(e.label){case 0:return[4,i.getNegotiationResponse(n)];case 1:if(r=e.sent(),2===i.connectionState)return[2,{value:void 0}];if(r.error)throw Error(r.error);if(r.ProtocolVersion)throw Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");return r.url&&(n=r.url),r.accessToken&&(t=r.accessToken,i.accessTokenFactory=function(){return t}),o++,[2]}})},i=this,e.label=6;case 6:return[5,t()];case 7:if("object"==typeof(s=e.sent()))return[2,s.value];e.label=8;case 8:if(r.url&&o<100)return[3,6];e.label=9;case 9:if(100===o&&r.url)throw Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(n,this.options.transport,r,u)];case 10:e.sent(),e.label=11;case 11:return this.transport instanceof l.LongPollingTransport&&(this.features.inherentKeepAlive=!0),this.transport.onreceive=this.onreceive,this.transport.onclose=function(e){return c.stopConnection(e)},this.changeState(0,1),[3,13];case 12:throw a=e.sent(),this.logger.log(p.LogLevel.Error,"Failed to start the connection: "+a),this.connectionState=2,this.transport=void 0,a;case 13:return[2]}})})},v.prototype.getNegotiationResponse=function(a){return g(this,void 0,void 0,function(){var t,n,r,o,i,s;return d(this,function(e){switch(e.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(r=e.sent())&&((t={}).Authorization="Bearer "+r,n=t),e.label=2;case 2:o=this.resolveNegotiateUrl(a),this.logger.log(p.LogLevel.Debug,"Sending negotiation request: "+o+"."),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this.httpClient.post(o,{content:"",headers:n})];case 4:if(200!==(i=e.sent()).statusCode)throw Error("Unexpected status code returned from negotiate "+i.statusCode);return[2,JSON.parse(i.content)];case 5:throw s=e.sent(),this.logger.log(p.LogLevel.Error,"Failed to complete negotiation with the server: "+s),s;case 6:return[2]}})})},v.prototype.createConnectUrl=function(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+"id="+t:e},v.prototype.createTransport=function(c,u,l,f){return g(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return d(this,function(e){switch(e.label){case 0:return t=this.createConnectUrl(c,l.connectionId),this.isITransport(u)?(this.logger.log(p.LogLevel.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=u,[4,this.transport.connect(t,f)]):[3,2];case 1:return e.sent(),this.changeState(0,1),[2];case 2:n=l.availableTransports||[],r=0,o=n,e.label=3;case 3:return r<o.length?(i=o[r],this.connectionState=0,"number"!=typeof(s=this.resolveTransport(i,u,f))?[3,8]:(this.transport=this.constructTransport(s),l.connectionId?[3,5]:[4,this.getNegotiationResponse(c)])):[3,9];case 4:l=e.sent(),t=this.createConnectUrl(c,l.connectionId),e.label=5;case 5:return e.trys.push([5,7,,8]),[4,this.transport.connect(t,f)];case 6:return e.sent(),this.changeState(0,1),[2];case 7:return a=e.sent(),this.logger.log(p.LogLevel.Error,"Failed to start the transport '"+h.HttpTransportType[s]+"': "+a),this.connectionState=2,l.connectionId=void 0,[3,8];case 8:return r++,[3,3];case 9:throw new Error("Unable to initialize any of the available transports.")}})})},v.prototype.constructTransport=function(e){switch(e){case h.HttpTransportType.WebSockets:if(!this.options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new s.WebSocketTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.WebSocket);case h.HttpTransportType.ServerSentEvents:if(!this.options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new o.ServerSentEventsTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.EventSource);case h.HttpTransportType.LongPolling:return new l.LongPollingTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1);default:throw new Error("Unknown transport: "+e+".")}},v.prototype.resolveTransport=function(e,t,n){var r,o,i=h.HttpTransportType[e.transport];if(null==i)this.logger.log(p.LogLevel.Debug,"Skipping transport '"+e.transport+"' because it is not supported by this client.");else{var s=e.transferFormats.map(function(e){return h.TransferFormat[e]});if(o=i,(r=t)&&0==(o&r))this.logger.log(p.LogLevel.Debug,"Skipping transport '"+h.HttpTransportType[i]+"' because it was disabled by the client.");else if(0<=s.indexOf(n)){if((i!==h.HttpTransportType.WebSockets||this.options.WebSocket)&&(i!==h.HttpTransportType.ServerSentEvents||this.options.EventSource))return this.logger.log(p.LogLevel.Debug,"Selecting transport '"+h.HttpTransportType[i]+"'."),i;this.logger.log(p.LogLevel.Debug,"Skipping transport '"+h.HttpTransportType[i]+"' because it is not supported in your environment.'")}else this.logger.log(p.LogLevel.Debug,"Skipping transport '"+h.HttpTransportType[i]+"' because it does not support the requested transfer format '"+h.TransferFormat[n]+"'.")}return null},v.prototype.isITransport=function(e){return e&&"object"==typeof e&&"connect"in e},v.prototype.changeState=function(e,t){return this.connectionState===e&&(this.connectionState=t,!0)},v.prototype.stopConnection=function(e){this.transport=void 0,(e=this.stopError||e)?this.logger.log(p.LogLevel.Error,"Connection disconnected with error '"+e+"'."):this.logger.log(p.LogLevel.Information,"Connection disconnected."),this.connectionState=2,this.onclose&&this.onclose(e)},v.prototype.resolveUrl=function(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if("undefined"==typeof window||!window||!window.document)throw new Error("Cannot resolve '"+e+"'.");var t=window.document.createElement("a");return t.href=e,this.logger.log(p.LogLevel.Information,"Normalizing '"+e+"' to '"+t.href+"'."),t.href},v.prototype.resolveNegotiateUrl=function(e){var t=e.indexOf("?"),n=e.substring(0,-1===t?e.length:t);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",n+=-1===t?"":e.substring(t)},v);function v(e,t){void 0===t&&(t={}),this.features={},i.Arg.isRequired(e,"url"),this.logger=Object(i.createLogger)(t.logger),this.baseUrl=this.resolveUrl(e),(t=t||{}).logMessageContent=t.logMessageContent||!1;var n="undefined"==typeof window;n||"undefined"==typeof WebSocket||t.WebSocket?n&&!t.WebSocket&&a&&(t.WebSocket=a):t.WebSocket=WebSocket,n||"undefined"==typeof EventSource||t.EventSource?n&&!t.EventSource&&void 0!==c&&(t.EventSource=c):t.EventSource=EventSource,this.httpClient=t.httpClient||new r.DefaultHttpClient(this.logger),this.connectionState=2,this.options=t,this.onreceive=null,this.onclose=null}},function(e,t,n){"use strict";var r,o,i,s;n.r(t),n.d(t,"HttpTransportType",function(){return r}),n.d(t,"TransferFormat",function(){return i}),(o=r=r||{})[o.None=0]="None",o[o.WebSockets=1]="WebSockets",o[o.ServerSentEvents=2]="ServerSentEvents",o[o.LongPolling=4]="LongPolling",(s=i=i||{})[s.Text=1]="Text",s[s.Binary=2]="Binary"},function(e,t,n){"use strict";n.r(t),n.d(t,"LongPollingTransport",function(){return i});var o=n(20),a=n(4),c=n(9),u=n(18),l=n(13),r=function(i,s,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}o((c=c.apply(i,s||[])).next())})},f=function(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},i=(Object.defineProperty(s.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),s.prototype.connect=function(i,s){return r(this,void 0,void 0,function(){var t,n,r,o;return f(this,function(e){switch(e.label){case 0:if(l.Arg.isRequired(i,"url"),l.Arg.isRequired(s,"transferFormat"),l.Arg.isIn(s,u.TransferFormat,"transferFormat"),this.url=i,this.logger.log(c.LogLevel.Trace,"(LongPolling transport) Connecting."),s===u.TransferFormat.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return t={abortSignal:this.pollAbort.signal,headers:{},timeout:1e5},s===u.TransferFormat.Binary&&(t.responseType="arraybuffer"),[4,this.getAccessToken()];case 1:return n=e.sent(),this.updateHeaderToken(t,n),r=i+"&_="+Date.now(),this.logger.log(c.LogLevel.Trace,"(LongPolling transport) polling: "+r+"."),[4,this.httpClient.get(r,t)];case 2:return 200!==(o=e.sent()).statusCode?(this.logger.log(c.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+o.statusCode+"."),this.closeError=new a.HttpError(o.statusText||"",o.statusCode),this.running=!1):this.running=!0,this.receiving=this.poll(this.url,t),[2]}})})},s.prototype.getAccessToken=function(){return r(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:return[2,e.sent()];case 2:return[2,null]}})})},s.prototype.updateHeaderToken=function(e,t){e.headers||(e.headers={}),t?e.headers.Authorization="Bearer "+t:e.headers.Authorization&&delete e.headers.Authorization},s.prototype.poll=function(i,s){return r(this,void 0,void 0,function(){var t,n,r,o;return f(this,function(e){switch(e.label){case 0:e.trys.push([0,,8,9]),e.label=1;case 1:return this.running?[4,this.getAccessToken()]:[3,7];case 2:t=e.sent(),this.updateHeaderToken(s,t),e.label=3;case 3:return e.trys.push([3,5,,6]),n=i+"&_="+Date.now(),this.logger.log(c.LogLevel.Trace,"(LongPolling transport) polling: "+n+"."),[4,this.httpClient.get(n,s)];case 4:return 204===(r=e.sent()).statusCode?(this.logger.log(c.LogLevel.Information,"(LongPolling transport) Poll terminated by server."),this.running=!1):200!==r.statusCode?(this.logger.log(c.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+r.statusCode+"."),this.closeError=new a.HttpError(r.statusText||"",r.statusCode),this.running=!1):r.content?(this.logger.log(c.LogLevel.Trace,"(LongPolling transport) data received. "+Object(l.getDataDetail)(r.content,this.logMessageContent)+"."),this.onreceive&&this.onreceive(r.content)):this.logger.log(c.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."),[3,6];case 5:return o=e.sent(),this.running?o instanceof a.TimeoutError?this.logger.log(c.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.closeError=o,this.running=!1):this.logger.log(c.LogLevel.Trace,"(LongPolling transport) Poll errored after shutdown: "+o.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:return this.logger.log(c.LogLevel.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.raiseOnClose(),[7];case 9:return[2]}})})},s.prototype.send=function(t){return r(this,void 0,void 0,function(){return f(this,function(e){return this.running?[2,Object(l.sendMessage)(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,t,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},s.prototype.stop=function(){return r(this,void 0,void 0,function(){var t,n;return f(this,function(e){switch(e.label){case 0:this.logger.log(c.LogLevel.Trace,"(LongPolling transport) Stopping polling."),this.running=!1,this.pollAbort.abort(),e.label=1;case 1:return e.trys.push([1,,5,6]),[4,this.receiving];case 2:return e.sent(),this.logger.log(c.LogLevel.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),t={headers:{}},[4,this.getAccessToken()];case 3:return n=e.sent(),this.updateHeaderToken(t,n),[4,this.httpClient.delete(this.url,t)];case 4:return e.sent(),this.logger.log(c.LogLevel.Trace,"(LongPolling transport) DELETE request sent."),[3,6];case 5:return this.logger.log(c.LogLevel.Trace,"(LongPolling transport) Stop finished."),this.raiseOnClose(),[7];case 6:return[2]}})})},s.prototype.raiseOnClose=function(){if(this.onclose){var e="(LongPolling transport) Firing onclose event.";this.closeError&&(e+=" Error: "+this.closeError),this.logger.log(c.LogLevel.Trace,e),this.onclose(this.closeError)}},s);function s(e,t,n,r){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.pollAbort=new o.AbortController,this.logMessageContent=r,this.running=!1,this.onreceive=null,this.onclose=null}},function(e,t,n){"use strict";n.r(t),n.d(t,"AbortController",function(){return r});var r=(o.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(o.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),o);function o(){this.isAborted=!1,this.onabort=null}},function(e,t,n){"use strict";n.r(t),n.d(t,"ServerSentEventsTransport",function(){return i});var c=n(9),u=n(18),l=n(13),r=function(i,s,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}o((c=c.apply(i,s||[])).next())})},o=function(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},i=(s.prototype.connect=function(s,a){return r(this,void 0,void 0,function(){var t,i=this;return o(this,function(e){switch(e.label){case 0:return l.Arg.isRequired(s,"url"),l.Arg.isRequired(a,"transferFormat"),l.Arg.isIn(a,u.TransferFormat,"transferFormat"),this.logger.log(c.LogLevel.Trace,"(SSE transport) Connecting."),this.url=s,this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(t=e.sent())&&(s+=(s.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(t)),e.label=2;case 2:return[2,new Promise(function(e,n){var r=!1;if(a===u.TransferFormat.Text){var t;if("undefined"!=typeof window)t=new i.eventSourceConstructor(s,{withCredentials:!0});else{var o=i.httpClient.getCookieString(s);t=new i.eventSourceConstructor(s,{withCredentials:!0,headers:{Cookie:o}})}try{t.onmessage=function(e){if(i.onreceive)try{i.logger.log(c.LogLevel.Trace,"(SSE transport) data received. "+Object(l.getDataDetail)(e.data,i.logMessageContent)+"."),i.onreceive(e.data)}catch(e){return void i.close(e)}},t.onerror=function(e){var t=new Error(e.data||"Error occurred");r?i.close(t):n(t)},t.onopen=function(){i.logger.log(c.LogLevel.Information,"SSE connected to "+i.url),i.eventSource=t,r=!0,e()}}catch(e){return void n(e)}}else n(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))})]}})})},s.prototype.send=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){return this.eventSource?[2,Object(l.sendMessage)(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,t,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},s.prototype.stop=function(){return this.close(),Promise.resolve()},s.prototype.close=function(e){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0,this.onclose&&this.onclose(e))},s);function s(e,t,n,r,o){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.logMessageContent=r,this.eventSourceConstructor=o,this.onreceive=null,this.onclose=null}},function(e,t,n){"use strict";n.r(t),n.d(t,"WebSocketTransport",function(){return o});var a=n(9),c=n(18),u=n(13),r=function(i,s,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}o((c=c.apply(i,s||[])).next())})},l=function(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},o=(i.prototype.connect=function(i,s){return r(this,void 0,void 0,function(){var t,o=this;return l(this,function(e){switch(e.label){case 0:return u.Arg.isRequired(i,"url"),u.Arg.isRequired(s,"transferFormat"),u.Arg.isIn(s,c.TransferFormat,"transferFormat"),this.logger.log(a.LogLevel.Trace,"(WebSockets transport) Connecting."),this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(t=e.sent())&&(i+=(i.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(t)),e.label=2;case 2:return[2,new Promise(function(t,n){var r;i=i.replace(/^http/,"ws");var e=o.httpClient.getCookieString(i);"undefined"==typeof window&&e&&(r=new o.webSocketConstructor(i,void 0,{headers:{Cookie:""+e}})),r=r||new o.webSocketConstructor(i),s===c.TransferFormat.Binary&&(r.binaryType="arraybuffer"),r.onopen=function(e){o.logger.log(a.LogLevel.Information,"WebSocket connected to "+i+"."),o.webSocket=r,t()},r.onerror=function(e){var t=null;"undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent&&(t=e.error),n(t)},r.onmessage=function(e){o.logger.log(a.LogLevel.Trace,"(WebSockets transport) data received. "+Object(u.getDataDetail)(e.data,o.logMessageContent)+"."),o.onreceive&&o.onreceive(e.data)},r.onclose=function(e){return o.close(e)}})]}})})},i.prototype.send=function(e){return this.webSocket&&this.webSocket.readyState===this.webSocketConstructor.OPEN?(this.logger.log(a.LogLevel.Trace,"(WebSockets transport) sending data. "+Object(u.getDataDetail)(e,this.logMessageContent)+"."),this.webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},i.prototype.stop=function(){return this.webSocket&&(this.webSocket.onclose=function(){},this.webSocket.onmessage=function(){},this.webSocket.onerror=function(){},this.webSocket.close(),this.webSocket=void 0,this.close(void 0)),Promise.resolve()},i.prototype.close=function(e){this.logger.log(a.LogLevel.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!e||!1!==e.wasClean&&1e3===e.code?this.onclose():this.onclose(new Error("WebSocket closed with status code: "+e.code+" ("+e.reason+").")))},i);function i(e,t,n,r,o){this.logger=n,this.accessTokenFactory=t,this.logMessageContent=r,this.webSocketConstructor=o,this.httpClient=e,this.onreceive=null,this.onclose=null}},function(e,t,n){"use strict";n.r(t),n.d(t,"JsonHubProtocol",function(){return o});var a=n(15),c=n(9),r=n(18),u=n(14),l=n(12),o=(i.prototype.parseMessages=function(e,t){if("string"!=typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=u.NullLogger.instance);for(var n=[],r=0,o=l.TextMessageFormat.parse(e);r<o.length;r++){var i=o[r],s=JSON.parse(i);if("number"!=typeof s.type)throw new Error("Invalid payload.");switch(s.type){case a.MessageType.Invocation:this.isInvocationMessage(s);break;case a.MessageType.StreamItem:this.isStreamItemMessage(s);break;case a.MessageType.Completion:this.isCompletionMessage(s);break;case a.MessageType.Ping:case a.MessageType.Close:break;default:t.log(c.LogLevel.Information,"Unknown message type '"+s.type+"' ignored.");continue}n.push(s)}return n},i.prototype.writeMessage=function(e){return l.TextMessageFormat.write(JSON.stringify(e))},i.prototype.isInvocationMessage=function(e){this.assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this.assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")},i.prototype.isStreamItemMessage=function(e){if(this.assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")},i.prototype.isCompletionMessage=function(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this.assertNotEmptyString(e.error,"Invalid payload for Completion message."),this.assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")},i.prototype.assertNotEmptyString=function(e,t){if("string"!=typeof e||""===e)throw new Error(t)},i);function i(){this.name="json",this.version=1,this.transferFormat=r.TransferFormat.Text}}],f.c=e,f.d=function(e,t,n){f.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},f.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.t=function(t,e){if(1&e&&(t=f(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(f.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)f.d(n,r,function(e){return t[e]}.bind(null,r));return n},f.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(t,"a",t),t},f.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},f.p="",f(f.s=0);function f(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return d[t].call(n.exports,n,n.exports,f),n.l=!0,n.exports}var d,e}),angular.module("SignalR",[]).factory("Hub",["$q","$log","$timeout",function(e,f,p){"use strict";var h=function(r,o){var n=this;var i=null;function s(e){var t={oldState:i,newState:e};return e!==i&&(i=e),t}function a(t){return function(){f.debug(r,"Calling method "+t);var e=Array.prototype.slice.call(arguments);return e=[t].concat(e),u.send.apply(u,e)}}function c(e){if(f.log("Hub "+r+' changed from "'+i+'" to "'+e+'"'),o.stateChanged){var t=s(e);o.stateChanged(t),e===h.connectionStates.disconnected&&o.autoReconnect&&(t=s(h.connectionStates.reconnecting),o.stateChanged(t),p(function(){n.start()},o.reconnectTimeout||1e3))}}var u=null,l=[];o.methods&&o.methods.map(function(e){var t=new a(e);n[e]=t}),this.start=function(){var e="WebSocket"in window||"MozWebSocket"in window,t=void 0;return o.forceWebSocket&&e&&(t={transport:signalR.TransportType.WebSockets}),(u=new signalR.HubConnection(function(){var e=o.rootPath+"/"+r,t=[];for(var n in o.queryParams)o.queryParams.hasOwnProperty(n)&&t.push(n+"="+o.queryParams[n]);return e+="?"+t.join("&"),f.debug("Hub",r,"url",e),e}(),t)).onclose(function(e){f.log("Connection Closed",r),e&&f.error(e),c(h.connectionStates.disconnected)}),function(){if(o.listeners)for(var e in o.listeners)if(o.listeners.hasOwnProperty(e)){var t=o.listeners[e];u.on(e,t)}}(),l.map(function(e){u.on(e.method,e.handler)}),u.start().then(function(){c(h.connectionStates.connected)},function(){if(f.error("Connection to SignalR Hub "+r+" failed!"),null===i)throw Error("Error connecting to SignalR!");c(h.connectionStates.disconnected)})},this.stop=function(){null!==u&&u.stop()},this.isConnected=function(){return u&&1===u.connection.connectionState},this.on=function(e,t){u&&u.on(e,t),l.push({method:e,handler:t})},this.off=function(t,n){u&&u.off(t,n);var e=l.findIndex(function(e){return e.method===t&&e.handler===n});0<=e&&l.splice(e,1)},o.autoStart&&this.start()};return h.connectionStates={connecting:"connecting",connected:"connected",reconnecting:"reconnecting",disconnected:"disconnected"},h}]);